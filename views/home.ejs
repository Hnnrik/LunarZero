<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <link rel="stylesheet" href="home.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>

</head>

<body>
    <section id="bodyMobile">
        
        <header>
            <section id="section-mobile-home">
                <span class="btn-nav-mobile">
                    <button id="gatilhoMenu">
                        <img src="icones/menu.svg" class="btn-nav-mobile-img" alt="">
                    </button>
                </span>

                <img id="logo-astronauta" src="fotos/img.png" alt="logo astronauta">

                <span class="btn-src-mobile">
                    <button id="btnPesquisar" onclick="togglePesquisa()">
                        <img id="iconePesquisa" src="icones/src.svg" class="btn-src-mobile-img" alt="Pesquisar">
                    </button>
                    <div id="campoPesquisa" class="campo-pesquisa">
                        <form id="formPesquisa" onsubmit="realizarPesquisa(); return false;">
                            <div id="div-pesquisa">
                                <input class="input-pesquisa" type="text" placeholder="Buscar por Jogo"
                                    id="inputPesquisa">
                                <button type="submit" id="img-scr"><img id="img-src-img" src="icones/srcescuro.svg" alt=""></button>
                            </div>
                        </form>
                    </div>

                </span>
        
                <div id="menuOffCanvas" class="conteudoOffCanvas">
                    <ul class="listaOffCanvas">
                        <li>
                            <a href="/"><img class="iconeMenu" src="icones/home.svg" alt=""></a>
                        </li>
                        <li>
                            <a href="biblioteca"><img class="iconeMenu" src="icones/perfil.svg" alt=""></a>
                        </li>
                        <li>
                            <a href="jogos"><img class="iconeMenu" src="icones/jogos.svg" alt=""></a>
                        </li>
                        <li>
                            <a href="criador"><img class="iconeMenu" src="icones/criador.svg" alt=""></a>
                        </li>
                        <li>
                            <a href="sobre"><img class="iconeMenu" src="icones/sobre.svg" alt=""></a>
                        </li>
                        <li>
                        <div class="perfil" data-bs-toggle="popover" title="Perfil"
                            data-bs-content="<% if (nomeUsuario) { %><a href='/logout'>Logout</a><% } else { %><a href='/login'>Login</a><% } %>">
                            <img class="icone" src="<%= fotoPerfil %>">
                        </div>
        
                        </li>
                    </ul>
                </div>
            </section>
        </header>
        <div id="fadePreto" class="fade-preto"></div>

        <main>
            <section id="section-criador-lunar">
                <div id="div-titulo-criador-lunar">
                    <h3 id="titulo-criador-lunar" class="texto-criador-lunar">
                        Criador Lunar
                    </h3>
                </div>
                <div id="div-descricao-criador-lunar">
                    <span id="btn-estrela-mobile">
                        <button>
                            <img src="icones/estrela.svg" class="btn-estrela-mobile-img" alt="">
                        </button>
                    </span>
                    <p id="paragrafo-criador-lunar" class="texto-criador-lunar">
                        A gente tá só esperando você. Vem ser um dos nossos criadores de conteúdo! Poste seu jogo para
                        que outros avaliem!
                    </p>
                </div>
            </section>

            <div id="jogos-da-semana-card">
                <h4>Jogos da Semana</h4>
            </div>

            <div class="carousel-container">
                <div class="cards-container">
                    <% jogos.forEach(jogo=> { %>
                        <div class="jogo-container" onclick="redirectJogo('<%= jogo._id %>')" action="">
                            <div class="carde">
                                <img src="<%= jogo.imagem %>" alt="Imagem 1">
                            </div>
                        </div>
                    <% }); %>
                </div>
            </div>

            <div id="jogos-da-semana-card">
                <h4>Mais jogados</h4>
            </div>

            <div class="carousel-container">
                <div class="cards-container">
                    <% jogos.forEach(jogo=> { %>
                        <div class="jogo-container" onclick="redirectJogo('<%= jogo._id %>')" action="">
                            <div class="carde">
                                <img src="<%= jogo.imagem %>" alt="Imagem 1">
                            </div>
                        </div>
                    <% }); %>
                </div>
            </div>

        </main>
        <footer>

        </footer>
    </section>
    <section id="bodyDasktop">
        <header>
            <nav>
                <div class="logo" id="redireciona">
                    <img src="fotos/lunarfoguete.png" alt="">
                    <h4>LUNAR</h4>
                </div>
                <ul type="none" class="menu">
                    <li>
                        <a href="biblioteca"><img class="iconeMenu" src="icones/perfil.svg" alt=""></a>
                    </li>
                    <li>
                        <a href="jogos"><img class="iconeMenu" src="icones/jogos.svg" alt=""></a>
                    </li>
                    <li>
                        <a href="criador"><img class="iconeMenu" src="icones/criador.svg" alt=""></a>
                    </li>
                    <li>
                        <a href="sobre"><img class="iconeMenu" src="icones/sobre.svg" alt=""></a>
                    </li>
                    <form action="/buscar-jogo" method="GET">
                        <div id="div-pesquisa">
                            <button type="submit" id="img-scr"><img id="img-src-img" src="icones/srcescuro.svg"
                                    alt=""></button>
                            <input class="input-pesquisa" name="nomeJogo" type="text" placeholder="Buscar por Jogo">
                        </div>
                    </form>
                </ul>
                <div class="perfil" data-bs-toggle="popover" title="Perfil"
                    data-bs-content="<% if (nomeUsuario) { %><a href='/logout'>Logout</a><% } else { %><a href='/login'>Login</a><% } %>">
                    <img class="icone" src="<%= fotoPerfil %>">
                </div>


                <script>

                    $(document).ready(function () {
                        $('.perfil').click(function () {
                            $(this).popover({
                                html: true,
                                trigger: 'manual'
                            }).popover('show');
                        });
                    });
                </script>

            </nav>
            <section>
                <img class="astro" src="fotos/img.png" alt="">
                <div class="criador">
                    <div id="div-h1">
                        <h1>Criador lunar</h1>
                    </div>
                    <div id="div-p">
                        <p>A gente tá só esperando você! <br>
                            Vem ser um dos nossos criadores de conteúdo, poste seu jogo para que outros avaliem.</p>
                    </div>
                    <div id="criador-btn">
                        <img src="icones/btn criador.svg" alt="">
                        <button>
                            QUERO SER UM CRIADOR
                        </button>
                    </div>
                    <script>
                        document.getElementById("criador-btn").addEventListener("click", function () {
                            window.location.href = "criador.html";
                        });
                    </script>
                </div>
                <img class="estrelas" src="fotos/estrelinhas.png" alt="">
            </section>
        </header>
        <main>
            <div id="jogos-da-semana-card">
                <h4>Jogos da Semana</h4>
            </div>
            <div class="carousel-container">
                <div class="cards-container">
                    <% jogos.forEach(jogo=> { %>
                        <div class="jogo-container" onclick="redirectJogo('<%= jogo._id %>')" action="">

                            <div class="carde">
                                <img src="<%= jogo.imagem %>" alt="Imagem 1">
                                <div class="descricao" id="description">
                                    <p>
                                        <%= jogo.descricao %>
                                    </p>
                                </div>
                            </div>

                            <span class="bcm" onmouseenter="description(event)"
                                onmouseleave="description(event)">
                                <button>
                                    <img src="icones/sobre.svg" class="bcmi" alt="">
                                </button>
                            </span>
                        </div>
                        <% }); %>
                </div>
            </div>

            <script>
                // Verifique se há uma mensagem de alerta na query string
                const params = new URLSearchParams(window.location.search);
                const alertMessage = params.get('alert');

                // Se houver uma mensagem de alerta, exiba-a em um alerta
                if (alertMessage) {
                    alert(alertMessage);
                }

                function redirectJogo(id) {
                    console.log('Redirecionando para o jogo com ID:', id);
                    window.location.href = '/tela-jogo/' + id;
                    return false; // Impede que o link seja seguido
                }

                function showDescription(jogoId, descricao) {
                    // Encontrar o elemento da descrição pelo ID do jogo
                    const descricaoElement = document.getElementById(`description-${jogoId}`);
                    // Preencher a descrição com o conteúdo dinâmico
                    descricaoElement.innerHTML = `<p>${descricao}</p>`;
                    // Exibir a descrição
                    descricaoElement.style.display = 'block';
                }

                function hideDescription(jogoId) {
                    // Encontrar o elemento da descrição pelo ID do jogo
                    const descricaoElement = document.getElementById(`description-${jogoId}`);
                    // Ocultar a descrição
                    descricaoElement.style.display = 'none';
                }
            </script>
            <div id="jogos-da-semana-card">
                <h4>Mais votados</h4>
            </div>
            <div class="carousel-container">
                <div class="cards-container">
                    <% jogosO.forEach(jogo=> { %>
                        <div class="jogo-container" onclick="redirectJogo('<%= jogo._id %>')" action="">

                            <div class="carde">
                                <img src="<%= jogo.imagem %>" alt="Imagem 1">
                                <div class="descricao" id="description">
                                    <p>
                                        <%= jogo.descricao %>
                                    </p>
                                </div>
                            </div>

                            <span class="bcm" onmouseenter="description(event)"
                                onmouseleave="description(event)">
                                <button>
                                    <img src="icones/sobre.svg" class="bcmi" alt="">
                                </button>
                            </span>
                        </div>
                        <% }); %>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; LUNAR 2024.</p>
        </footer>
        <script>
            document.getElementById("redireciona").addEventListener("click", function () {
                window.location.href = "/";
            });
        </script>

    </section>
</body>

</html>